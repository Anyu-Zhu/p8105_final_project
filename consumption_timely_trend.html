<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Consumer Behaviors in Pandemic</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exploratory Data Analysis
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="covid_state_case_rate.html">Covid-19</a>
    </li>
    <li>
      <a href="consumption_timely_trend.html">Consumption Expenditure</a>
    </li>
  </ul>
</li>
<li>
  <a href="linear_model.html">Regression Analyses</a>
</li>
<li>
  <a href="pce_state_distribution.html">Interactive Maps</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="project_report.html">Project Report</a>
</li>
<li>
  <a href="https://www.youtube.com/">
    <span class="fa fa-youtube"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/sz3029/final_project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Consumer Behaviors in Pandemic</h1>

</div>


<p>This page is about trend in personal consumption in the US</p>
<div id="import-data" class="section level2">
<h2>Import data</h2>
<pre class="r"><code>consumption_product = readxl::read_excel(&quot;data/consumption_product.xlsx&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  pivot_longer(
    x2019_q1 : x2021_q3,
    names_to = &quot;time&quot;,
    names_prefix = &quot;x&quot;,
    values_to = &quot;consumption&quot;
  ) 

consumption_function = readxl::read_excel(&quot;./data/consumption_function.xlsx&quot;) %&gt;% 
  janitor::clean_names() %&gt;% 
  filter(as.numeric(line) &lt;= 28) %&gt;% 
    pivot_longer(
    x2019_q1 : x2021_q3,
    names_to = &quot;time&quot;,
    names_prefix = &quot;x&quot;,
    values_to = &quot;consumption&quot;
  ) %&gt;% 
  mutate(functions = recode(functions, `Household consumption expenditures (for services)` = &quot;household&quot;,
                           `Final consumption expenditures of nonprofit institutions serving households (NPISHs)1` = &quot;nonprofit consumption&quot;))

general_1 = consumption_function %&gt;% 
  filter(functions %in% c(&quot;Goods&quot;,&quot;Services&quot;))

covid_seasonal = read_csv(&quot;covid_seasonal.csv&quot;) %&gt;% 
  rename(time = date) %&gt;% 
  select(time, quarterly)

consumption_seasonal = general_1 %&gt;% 
  select(-line)

covid_consumption = left_join(consumption_seasonal, covid_seasonal, by = &quot;time&quot;)

name = colnames(consumption_function)
col = ncol(consumption_function)
row = (nrow(consumption_function) / 11) - 7</code></pre>
<p>Data description The <code>Consumption Function</code> data frame contains the amount of consumption of goods with different functions. There are line, functions, time, consumption in total 4 coloumns in this data frame, and 21 kinds of different functions in total.</p>
<p>Data cleaning To clean the <code>Consumption Function</code>, we first used ‘janitor::clean_names()’ to get a uniform naming scheme. From there, we deleted unneeded rows (whose row numbers are greater than 28, since these rows are not showing the function of the goods), made a <code>time</code> variable that sorted the years and the quarter. We renamed <code>Household consumption expenditures (for services)</code> to <code>household</code>, and renamed <code>Final consumption expenditures of nonprofit institutions serving households (NPISHs)1</code> to <code>nonprofit consumption</code>, since the original names are too long.</p>
</div>
<div id="consumption-and-covid" class="section level2">
<h2>Consumption and Covid</h2>
<pre class="r"><code>joint_plot = plot_ly(covid_consumption, x = ~time) %&gt;% 
  add_trace(y = ~consumption, type = &quot;scatter&quot;, mode = &quot;lines&quot;, color = ~functions, yaixs = &quot;y&quot;) %&gt;% 
  add_trace(y = ~quarterly, type = &quot;bar&quot;, name = &quot;Covid Cases&quot;, yaxis = &quot;y2&quot;, opacity = 0.6, marker = list(color = &#39;rgb(158,202,225)&#39;))  %&gt;% 
  layout(title = &quot;Consumption of Goods and Services Compared with Covid Cases&quot;,
         yaxis=list(title = &quot;consumption expenditure&quot;, side=&quot;left&quot;),
         yaxis2=list(title = &quot;covid cases&quot;, side=&quot;right&quot;, overlaying=&quot;y&quot;),
         showlegend=TRUE)

joint_plot</code></pre>
<div id="htmlwidget-88fbd6c5ac06dcc93534" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-88fbd6c5ac06dcc93534">{"x":{"visdat":{"bd5e5b0b721e":["function () ","plotlyVisDat"]},"cur_data":"bd5e5b0b721e","attrs":{"bd5e5b0b721e":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"scatter","mode":"lines","color":{},"yaixs":"y","inherit":true},"bd5e5b0b721e.1":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"y":{},"type":"bar","name":"Covid Cases","yaxis":"y2","opacity":0.6,"marker":{"color":"rgb(158,202,225)"},"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Consumption of Goods and Services Compared with Covid Cases","yaxis":{"domain":[0,1],"automargin":true,"title":"consumption expenditure","side":"left"},"yaxis2":{"title":"covid cases","side":"right","overlaying":"y"},"showlegend":true,"xaxis":{"domain":[0,1],"automargin":true,"title":"time","type":"category","categoryorder":"array","categoryarray":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"]},"hovermode":"closest"},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[4382806,4479375,4512708,4540784,4530935,4349912,4867188,4867251,5245025,5529790,5494157],"type":"scatter","mode":"lines","yaixs":"y","name":"Goods","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[9772746,9896347,10016772,10113165,9908154,8639817,9426643,9600360,9760419,10151909,10452091],"type":"scatter","mode":"lines","yaixs":"y","name":"Services","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[214012,2488914,4639084,12769343,10203161,3129379,9721541,214012,2488914,4639084,12769343,10203161,3129379,9721541],"type":"bar","name":"Covid Cases","yaxis":"y2","opacity":0.6,"marker":{"color":"rgb(158,202,225)","line":{"color":"rgba(44,160,44,1)"}},"error_y":{"color":"rgba(44,160,44,1)"},"error_x":{"color":"rgba(44,160,44,1)"},"xaxis":"x","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The lowest point actually did not happen as expected at the peak of the pandemic. In the second quarter of 2020, when cases start to rise, personal protective equipment were in a shortage, no effective treatment plans/vaccines are available, the total expenditure of consumption in the US reached to its lowest.</p>
<p>Consumption expenditures of services experienced a steeper change than expenditures of goods due to the shutdown of businesses, the quarantine and the lock down policies etc.</p>
<p>Even though cases keep rising, as restrictions keep lifting, the rate of vaccination keep rising, economics keep recovering, people’s consumption expenditure grows steadly after the third quarter of 2020. Although the severity of Covid 19 reached to the first peak in the fourth quarter of 2020, it has limited effect on people’s consumption behavior.</p>
<p>The total consumption expenditure is even larger by now comparing with that before the pandemic. This can be partially explained by inflation and government’s stimulus plan.</p>
</div>
<div id="consumption-of-goods" class="section level2">
<h2>Consumption of Goods</h2>
<pre class="r"><code>general_2 = consumption_function %&gt;% 
  filter(functions %in% c(&quot;Durable goods&quot;,&quot;Nondurable goods&quot;,&quot;household&quot;,&quot;nonprofit consumption&quot;)) %&gt;% 
  select(-line) %&gt;% 
  pivot_wider(names_from = functions, values_from = consumption) %&gt;% 
  janitor::clean_names()

subfig_1 = plot_ly(general_2, x = ~time, y = ~durable_goods, type = &quot;bar&quot;, name = &quot;Durable Goods&quot;, marker = list(color = &#39;rgb(49,130,189)&#39;)) %&gt;% 
  add_trace(y = ~nondurable_goods, name = &quot;Nondurable Goods&quot;, marker = list(color = &#39;rgb(204,204,204)&#39;)) %&gt;% 
  layout(title = &quot;Decomposition of Consumption of Goods&quot;,
         yaxis = list(title = &quot;Consumption&quot;), barmode = &quot;stack&quot;,
         legend = list(orientation = &#39;h&#39;, x = 0, y = -0.2))

subfig_1</code></pre>
<div id="htmlwidget-a46e72f0cd59a9b9b9ff" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a46e72f0cd59a9b9b9ff">{"x":{"visdat":{"bd5e1eaf0991":["function () ","plotlyVisDat"]},"cur_data":"bd5e1eaf0991","attrs":{"bd5e1eaf0991":{"x":{},"y":{},"marker":{"color":"rgb(49,130,189)"},"name":"Durable Goods","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"bd5e1eaf0991.1":{"x":{},"y":{},"marker":{"color":"rgb(204,204,204)"},"name":"Nondurable Goods","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Decomposition of Consumption of Goods","yaxis":{"domain":[0,1],"automargin":true,"title":"Consumption"},"barmode":"stack","legend":{"orientation":"h","x":0,"y":-0.2},"xaxis":{"domain":[0,1],"automargin":true,"title":"time","type":"category","categoryorder":"array","categoryarray":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[1473292,1509231,1531434,1539183,1484907,1468253,1753295,1759179,1957840,2092153,1984391],"marker":{"color":"rgb(49,130,189)","line":{"color":"rgba(31,119,180,1)"}},"name":"Durable Goods","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[2909515,2970143,2981274,3001600,3046028,2881659,3113894,3108072,3287185,3437637,3509766],"marker":{"color":"rgb(204,204,204)","line":{"color":"rgba(255,127,14,1)"}},"name":"Nondurable Goods","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The proportion of the nondurable goods such as food, drinks and clothing etc. increased after the second quarter of 2020, the time when the cases are rising. People are more willing to spend income on the nonduarble goods instead of spending them on buying the durable goods such as cars and house.</p>
<p>This might result from the work-from-home policy which many companies are still keeping even after the outbreak of COVID-19. For example, people need to prepare food for themselves since many of the restaurants are no longer serving, and they don’t need to drive that much so many of them don’t buy the new cars as frequent as they used to.</p>
<p>There is a lowest point of the value of consumption expenditure in all kind of goods consumption in the second quarter of 2020, when the COVID-19 outbroke, and after that, the consumption gradually grow up. From the lowest point we can infer that people were influenced a lot because of the pandemic, many of them might have lost their job in this period, so they don’t have enough money to consume as what they did before.</p>
<div id="durable-goods" class="section level3">
<h3>Durable Goods</h3>
<pre class="r"><code>durable_goods = 
  consumption_function %&gt;% 
  filter(functions %in% c(&quot;Motor vehicles and parts&quot;,&quot;Furnishings and durable household equipment&quot;,&quot;Recreational goods and vehicles&quot;,&quot;Other durable goods&quot;)) 

durable_goods %&gt;% 
  plot_ly(x = ~time, y = ~consumption, type = &#39;scatter&#39;, mode = &#39;lines&#39;, yaxis=&quot;y&quot;, color = ~functions) %&gt;% 
  layout(title = &quot;Decomposition of Consumption in Durable Goods&quot;,
         legend = list(orientation = &#39;h&#39;, x = 0, y = -0.2))</code></pre>
<div id="htmlwidget-87b414418a2980c6bc67" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-87b414418a2980c6bc67">{"x":{"visdat":{"bd5e1e321778":["function () ","plotlyVisDat"]},"cur_data":"bd5e1e321778","attrs":{"bd5e1e321778":{"x":{},"y":{},"mode":"lines","yaxis":"y","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Decomposition of Consumption in Durable Goods","legend":{"orientation":"h","x":0,"y":-0.2},"xaxis":{"domain":[0,1],"automargin":true,"title":"time","type":"category","categoryorder":"array","categoryarray":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"consumption"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[351812,359974,364473,364537,365707,361205,419261,415356,461914,473689,469525],"mode":"lines","yaxis":"y","type":"scatter","name":"Furnishings and durable household equipment","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[500073,512560,518995,526552,481961,485209,595791,602099,674905,758055,655596],"mode":"lines","yaxis":"y","type":"scatter","name":"Motor vehicles and parts","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[214607,217193,219381,219279,208514,163854,228757,233053,261659,279581,285826],"mode":"lines","yaxis":"y","type":"scatter","name":"Other durable goods","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[406800,419504,428585,428815,428724,457986,509485,508671,559362,580828,573443],"mode":"lines","yaxis":"y","type":"scatter","name":"Recreational goods and vehicles","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><code>Motor vehicles and parts</code> increases fastest after experiencing the bottom point, from which we can infer that people go out even more frequently after the pandemic than before the pandemic. Let’s call it <em>revenge travel</em>: people become more willing to get out of the room after being trapped at home for a long time due to the pandemic.</p>
<p><code>Recrational goods and vehicles</code>(includes video/audio equipments and sporting equipments) keep increasing during the pandemic because people are spending more time at home instead of socializing. Thus people are changing their ways of having fun, which leads to more consumption for products like televisions, video games and some recreational vehicles.</p>
<p><code>Furnishngs and durable household equipment</code> consumption value barely reduced in the pandemic, and there is a growth after the second quarter of 2020. That’s probably because people’s demand on durable goods like this does not change significantly due to the pandemic, on the contrary, staying at home increases people’s willingness to buy furniture.</p>
<p><code>Other durable goods</code> includes jewelry and watches, therapeutic appliances, educational books, luggages, and telephones and related. Like most of other kinds of products, the value of expenditure experienced a lowest point at the second quarter of 2020 and recovered after that.</p>
</div>
<div id="nondurable-goods" class="section level3">
<h3>Nondurable Goods</h3>
<p>The proportion of consumption expenditure on food/beverages and other nondurable goods exceeds a lot than that of clothing/footware and energy goods. Unlike the changes in consumption of clothing/footware and energy goods, that in food/beverages and other nondurable goods is not experiencing reduction in the pandemic but increases steadly.</p>
<pre class="r"><code>nondurable_goods = 
  consumption_function %&gt;% 
  filter(functions %in% c(&quot;Food and beverages purchased for off-premises consumption&quot;,&quot;Clothing and footwear&quot;,&quot;Gasoline and other energy goods&quot;,&quot;Other nondurable goods&quot;)) 

nondurable_goods %&gt;% 
  plot_ly(x = ~time, y = ~consumption, type = &#39;scatter&#39;, mode = &#39;lines&#39;, yaxis=&quot;y&quot;, color = ~functions) %&gt;% 
  layout(title = &quot;Decompostion of Consumption in Nondurable Goods&quot;,
         legend = list(orientation = &#39;h&#39;, x = 0, y = -0.2))</code></pre>
<div id="htmlwidget-e3c55d33e00baae2f0d0" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e3c55d33e00baae2f0d0">{"x":{"visdat":{"bd5e68c2148d":["function () ","plotlyVisDat"]},"cur_data":"bd5e68c2148d","attrs":{"bd5e68c2148d":{"x":{},"y":{},"mode":"lines","yaxis":"y","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Decompostion of Consumption in Nondurable Goods","legend":{"orientation":"h","x":0,"y":-0.2},"xaxis":{"domain":[0,1],"automargin":true,"title":"time","type":"category","categoryorder":"array","categoryarray":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"consumption"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[393358,398285,400000,401018,366262,293634,394242,395605,436819,476952,479991],"mode":"lines","yaxis":"y","type":"scatter","name":"Clothing and footwear","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[1013441,1027365,1041340,1041498,1125137,1152114,1159491,1149962,1201534,1223364,1246388],"mode":"lines","yaxis":"y","type":"scatter","name":"Food and beverages purchased for off-premises consumption","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[323855,350140,332828,343650,305160,188522,245433,247914,300287,345451,378458],"mode":"lines","yaxis":"y","type":"scatter","name":"Gasoline and other energy goods","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[1178860,1194353,1207107,1215435,1249469,1247389,1314729,1314592,1348545,1391871,1404929],"mode":"lines","yaxis":"y","type":"scatter","name":"Other nondurable goods","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p><code>Clothing and foodwear</code> consumption reduces rapidly in the pandemic because people began to work from home, and didn’t need to go outside to meet other people. So they could just stay in their own room wearing the slippers and pajamas, didn’t need to buy that much new clothes and shoes.</p>
<p>Similar to changes in motor vehicles, the consumption expenditure in <code>Gasoline and other energy goods</code> experienced significant decline in the second quarter of 2020 due to reductions in transportation. Consumption in energy goods by the end of 2021 has already surpassed that in 2019 probably due to increase in gasoline prices in the United States.</p>
<p>There is a small peak in the second quarter in 2020 in the consumption of <code>food and beverages</code>. We can infer that people spent more time at home and reduced the frequency of dining outside. Thus leading to more spending on buying food and beverages.</p>
<p><code>Othe nondurable goods</code> includes medical products, recreational items, household supplies, personal care products, tobacco, and magazines/newspapers. Similar to that of food and beverages, the total consumption of this category keep increasing and exceeds the value before the pandemic.</p>
</div>
</div>
<div id="consumption-of-services" class="section level2">
<h2>Consumption of Services</h2>
<p>The consumption of services is calculated with two categories: household consumption expenditures for services, and final consumption expenditures of nonprofit institutions serving households (nonprofit consumption). We can see the consumption value of nonprofit institutions remain steady comparing with household services from 2019 till now.</p>
<p>Since we are focusing on consumer behavior analysis in our project, we only analyze the part of household consumption expenditures of services.</p>
<pre class="r"><code>subfig_2 = plot_ly(general_2, x = ~time, y = ~household, type = &quot;bar&quot;, name = &quot;Household&quot;, marker = list(color = &#39;rgb(49,130,189)&#39;)) %&gt;% 
  add_trace(y = ~nonprofit_consumption, name = &quot;Nonprofit Consumption&quot;, marker = list(color = &#39;rgb(204,204,204)&#39;)) %&gt;% 
  layout(title = &quot;Decomposition of Consumption in Services &quot;,
         yaixs = list(title = &quot;Consumption&quot;), barmode = &quot;stack&quot;,
         legend = list(orientation = &#39;h&#39;, x = 0, y = -0.2))

subfig_2</code></pre>
<div id="htmlwidget-d6ad31a05ce568707863" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d6ad31a05ce568707863">{"x":{"visdat":{"bd5e2302e206":["function () ","plotlyVisDat"]},"cur_data":"bd5e2302e206","attrs":{"bd5e2302e206":{"x":{},"y":{},"marker":{"color":"rgb(49,130,189)"},"name":"Household","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"bd5e2302e206.1":{"x":{},"y":{},"marker":{"color":"rgb(204,204,204)"},"name":"Nonprofit Consumption","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Decomposition of Consumption in Services ","yaixs":{"title":"Consumption"},"barmode":"stack","legend":{"orientation":"h","x":0,"y":-0.2},"xaxis":{"domain":[0,1],"automargin":true,"title":"time","type":"category","categoryorder":"array","categoryarray":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"household"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[9336650,9459052,9571467,9672303,9387654,8062770,8932091,9108956,9281694,9684841,9984527],"marker":{"color":"rgb(49,130,189)","line":{"color":"rgba(31,119,180,1)"}},"name":"Household","type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[436096,437295,445306,440862,520500,577046,494552,491404,478725,467067,467565],"marker":{"color":"rgb(204,204,204)","line":{"color":"rgba(255,127,14,1)"}},"name":"Nonprofit Consumption","type":"bar","error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<div id="household-services" class="section level3">
<h3>Household Services</h3>
<p>Except for <code>housing and utilities</code> and <code>finantial service and insurance</code>, the consumption expenditure of all kinds of household services experienced a sharp decline in the second quarter of 2020.</p>
<pre class="r"><code>household_consumption =
  consumption_function %&gt;% 
  filter(functions %in% c(&quot;Housing and utilities&quot;,&quot;Health care&quot;,&quot;Transportation services&quot;,&quot;Recreation services&quot;,&quot;Food services and accommodations&quot;,&quot;Financial services and insurance&quot;,&quot;Other services&quot;)) 

household_consumption %&gt;% 
  plot_ly(x = ~time, y = ~consumption, type = &#39;scatter&#39;, mode = &#39;lines&#39;, yaxis=&quot;y&quot;, color = ~functions) %&gt;% 
  layout(title = &quot;Decomposition of Consumption in Household Services&quot;,
         legend = list(orientation = &#39;h&#39;, x = 0, y = -0.2))</code></pre>
<div id="htmlwidget-2459a55fdeb0cb80bafe" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-2459a55fdeb0cb80bafe">{"x":{"visdat":{"bd5e728b18d7":["function () ","plotlyVisDat"]},"cur_data":"bd5e728b18d7","attrs":{"bd5e728b18d7":{"x":{},"y":{},"mode":"lines","yaxis":"y","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Decomposition of Consumption in Household Services","legend":{"orientation":"h","x":0,"y":-0.2},"xaxis":{"domain":[0,1],"automargin":true,"title":"time","type":"category","categoryorder":"array","categoryarray":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"consumption"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[1156285,1166554,1176984,1186518,1193935,1168700,1200473,1222023,1244898,1256390,1277308],"mode":"lines","yaxis":"y","type":"scatter","name":"Financial services and insurance","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[986910,1006812,1019355,1020003,933567,616784,829765,826074,888345,1028749,1082174],"mode":"lines","yaxis":"y","type":"scatter","name":"Food services and accommodations","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[2408726,2449708,2469921,2504266,2406893,2000289,2369192,2457229,2464208,2534433,2579679],"mode":"lines","yaxis":"y","type":"scatter","name":"Health care","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[2534726,2554133,2585343,2611833,2622579,2667698,2682553,2699745,2727182,2753433,2789051],"mode":"lines","yaxis":"y","type":"scatter","name":"Housing and utilities","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[1196655,1207151,1234884,1248425,1221681,1014391,1101973,1136116,1157803,1203974,1279824],"mode":"lines","yaxis":"y","type":"scatter","name":"Other services","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[573716,582492,582808,594003,541712,303673,405678,414984,442457,490547,515485],"mode":"lines","yaxis":"y","type":"scatter","name":"Recreation services","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","frame":null},{"x":["2019_q1","2019_q2","2019_q3","2019_q4","2020_q1","2020_q2","2020_q3","2020_q4","2021_q1","2021_q2","2021_q3"],"y":[479631,492203,502172,507255,467287,291235,342457,352785,356800,417315,461005],"mode":"lines","yaxis":"y","type":"scatter","name":"Transportation services","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Consumption of <code>Health care</code> reduced significantly in the second quarter of 2020 because the hospital didn’t have enough ability to take in other patients due to increasing cases of Covid. Also, most people stayed at home, which made them less likely to get illness such as cold.</p>
<p><code>Transpotation service</code> includes <code>motor vehicle services</code> and <code>public transportation</code>. Due to changes in mode of working/education and reduction of services in public transportation, these fee reduced rapidly in the pandemic. The total consumption of transportation hasn’t recovered to the level before the pandemic by the third quarter of 2021.</p>
<p><code>Food service and accommodations</code> reduced because most of the restaurants were shut down in the pandemic. And people were not encouraged to eat outside for healthcare reasons. By the third quarter of 2021, the value in this category reached to a new highest level due to increase in price and the recovery of dining services.</p>
<p><code>Recreation service</code> mainly consists of the fees of the activities for fun such as sport, museum, gambling, package tour etc. Most of these activities need to be completed outdoor, which were limited during the pandemic, thus the value of consumption reduced significantly in the second quarter of 2020.</p>
<p>Only the <code>housing and utilities</code>(which mainly includes housing rental and the fees for the resources at home such as electricity and gas) and <code>financial service and insurance</code> (which mainly includes life and health insurance and commissions in banks) were not reduced in the pandemic and even increased because people spend most of their time at home, and was impossible to use less life basic resource. Also, most of the service in the banks can be completed online now, so paying for the insurance and the commission was not influenced a lot in the pandemic.</p>
</div>
</div>
<div id="consumption-structure-analysis" class="section level2">
<h2>Consumption Structure Analysis</h2>
<p>This part visualizes the the percentage of consumption of different categories of products in durable goods, nondurable goods, and services.</p>
<p>By the comparison between first quarter in 2019, second quarter in 2020, third quarter in 2021, there is no significant changes observed in proportion of different categories of consumption.</p>
<pre class="r"><code>areas &lt;- c(rgb(1, 0, 0, 0.25),
           rgb(0, 1, 0, 0.25),
           rgb(0, 0, 1, 0.25))

percent &lt;- function(x) {
  if(is.numeric(x)){ 
    ifelse(is.na(x), x, paste0(round(x*100L, 2), &quot;%&quot;)) 
  } else x 
}

durable_goods_radar = durable_goods %&gt;% 
  filter(time %in% c(&quot;2019_q1&quot;, &quot;2020_q2&quot;, &quot;2021_q3&quot;)) %&gt;% 
  select(functions, time, consumption)  %&gt;% 
  pivot_wider(names_from = functions, values_from = consumption) 

total = rep(1,5)
start = rep(0,5)
durable_goods_radar = rbind(total, start, durable_goods_radar)[,-1]
rownames(durable_goods_radar) = c(&quot;1&quot;, &quot;2&quot;, &quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;)
colnames(durable_goods_radar) = c(&quot;motor&quot;, &quot;furnishing&quot;, &quot;recreation&quot;, &quot;other&quot;)
durable_goods_radar[3,] = durable_goods_radar[3,]/1473292
durable_goods_radar[4,] = durable_goods_radar[4,]/1468253
durable_goods_radar[5,] = durable_goods_radar[5,]/1984391

durable_goods_radar[-c(1,2),] %&gt;% 
  set_rownames(.,c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;)) %&gt;% 
  mutate_each(funs(percent)) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">motor</th>
<th align="left">furnishing</th>
<th align="left">recreation</th>
<th align="left">other</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019_q1</td>
<td align="left">33.94%</td>
<td align="left">23.88%</td>
<td align="left">27.61%</td>
<td align="left">14.57%</td>
</tr>
<tr class="even">
<td align="left">2020_q2</td>
<td align="left">33.05%</td>
<td align="left">24.6%</td>
<td align="left">31.19%</td>
<td align="left">11.16%</td>
</tr>
<tr class="odd">
<td align="left">2021_q3</td>
<td align="left">33.04%</td>
<td align="left">23.66%</td>
<td align="left">28.9%</td>
<td align="left">14.4%</td>
</tr>
</tbody>
</table>
<pre class="r"><code>radar_1 = radarchart(durable_goods_radar,
                     cglty = 2, cglcol = &quot;gray&quot;, pcol = 2:4, plwd = 1, plty = 2) 
legend(&quot;topright&quot;,
       legend = c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;),
       bty = &quot;n&quot;, col = areas, pch = 20,
       text.col = &quot;grey25&quot;, pt.cex = 2)</code></pre>
<p><img src="consumption_timely_trend_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>nondurable_goods_radar = nondurable_goods %&gt;% 
  filter(time %in% c(&quot;2019_q1&quot;, &quot;2020_q2&quot;, &quot;2021_q3&quot;)) %&gt;% 
  select(functions, time, consumption)  %&gt;% 
  pivot_wider(names_from = functions, values_from = consumption) 

nondurable_goods_radar = rbind(total, start, nondurable_goods_radar)[,-1]
rownames(nondurable_goods_radar) = c(&quot;1&quot;, &quot;2&quot;, &quot;2019_q1&quot;, &quot;2020_q2&quot;, &quot;2021_q3&quot;)
colnames(nondurable_goods_radar) = c(&quot;food/beverage&quot;, &quot;clothing&quot;, &quot;energy&quot;, &quot;other&quot;)
nondurable_goods_radar[3,] = nondurable_goods_radar[3,]/2909515
nondurable_goods_radar[4,] = nondurable_goods_radar[4,]/2881659
nondurable_goods_radar[5,] = nondurable_goods_radar[5,]/3509766

nondurable_goods_radar[-c(1,2),] %&gt;% 
  set_rownames(.,c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;)) %&gt;% 
  mutate_each(funs(percent)) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">food/beverage</th>
<th align="left">clothing</th>
<th align="left">energy</th>
<th align="left">other</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019_q1</td>
<td align="left">34.83%</td>
<td align="left">13.52%</td>
<td align="left">11.13%</td>
<td align="left">40.52%</td>
</tr>
<tr class="even">
<td align="left">2020_q2</td>
<td align="left">39.98%</td>
<td align="left">10.19%</td>
<td align="left">6.54%</td>
<td align="left">43.29%</td>
</tr>
<tr class="odd">
<td align="left">2021_q3</td>
<td align="left">35.51%</td>
<td align="left">13.68%</td>
<td align="left">10.78%</td>
<td align="left">40.03%</td>
</tr>
</tbody>
</table>
<pre class="r"><code>radar_2 = radarchart(nondurable_goods_radar,
                     cglty = 2, cglcol = &quot;gray&quot;, pcol = 2:4, plwd = 1, plty = 2)
legend(&quot;topright&quot;,
       legend = c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;),
       bty = &quot;n&quot;, col = areas, pch = 20,
       text.col = &quot;grey25&quot;, pt.cex = 2)</code></pre>
<p><img src="consumption_timely_trend_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>household_consumption_radar = household_consumption %&gt;% 
  filter(time %in% c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;)) %&gt;% 
  select(functions, time, consumption)  %&gt;% 
  pivot_wider(names_from = functions, values_from = consumption) 

total = rep(1,8)
start = rep(0,8)
household_consumption_radar = rbind(total, start, household_consumption_radar)[,-1]
rownames(household_consumption_radar) = c(&quot;1&quot;, &quot;2&quot;, &quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;)
colnames(household_consumption_radar) = c(&quot;housing&quot;, &quot;healthcare&quot;, &quot;transports&quot;, &quot;recreation&quot;, &quot;accomodation&quot;, &quot;finance&quot;, &quot;other&quot;)
household_consumption_radar[3,] = household_consumption_radar[3,]/9336650
household_consumption_radar[4,] = household_consumption_radar[4,]/8062770
household_consumption_radar[5,] = household_consumption_radar[5,]/9984527

household_consumption_radar[-c(1,2),] %&gt;% 
  set_rownames(.,c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;)) %&gt;% 
  mutate_each(funs(percent)) %&gt;% 
  knitr::kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">housing</th>
<th align="left">healthcare</th>
<th align="left">transports</th>
<th align="left">recreation</th>
<th align="left">accomodation</th>
<th align="left">finance</th>
<th align="left">other</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2019_q1</td>
<td align="left">27.15%</td>
<td align="left">25.8%</td>
<td align="left">5.14%</td>
<td align="left">6.14%</td>
<td align="left">10.57%</td>
<td align="left">12.38%</td>
<td align="left">12.82%</td>
</tr>
<tr class="even">
<td align="left">2020_q2</td>
<td align="left">33.09%</td>
<td align="left">24.81%</td>
<td align="left">3.61%</td>
<td align="left">3.77%</td>
<td align="left">7.65%</td>
<td align="left">14.5%</td>
<td align="left">12.58%</td>
</tr>
<tr class="odd">
<td align="left">2021_q3</td>
<td align="left">27.93%</td>
<td align="left">25.84%</td>
<td align="left">4.62%</td>
<td align="left">5.16%</td>
<td align="left">10.84%</td>
<td align="left">12.79%</td>
<td align="left">12.82%</td>
</tr>
</tbody>
</table>
<pre class="r"><code>radar_3 = radarchart(household_consumption_radar,
                     cglty = 2, cglcol = &quot;gray&quot;, pcol = 2:4, plwd = 1, plty = 2)
legend(&quot;topright&quot;,
       legend = c(&quot;2019_q1&quot;, &quot;2020_q2&quot;,&quot;2021_q3&quot;),
       bty = &quot;n&quot;, col = areas, pch = 20,
       text.col = &quot;grey25&quot;, pt.cex = 2)</code></pre>
<p><img src="consumption_timely_trend_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
